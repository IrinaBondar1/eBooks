@model eBooks_MVC.Models.CarteViewModel

@{
    ViewBag.Title = "Detalii Carte";
}

@if (TempData["Success"] != null)
{
    <div class="alert alert-success alert-dismissible fade in" role="alert">
        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
            <span aria-hidden="true">&times;</span>
        </button>
        @TempData["Success"]
    </div>
}

@if (TempData["Error"] != null)
{
    <div class="alert alert-danger alert-dismissible fade in" role="alert">
        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
            <span aria-hidden="true">&times;</span>
        </button>
        @TempData["Error"]
    </div>
}

<h2>Detalii Carte</h2>

<div>
    <h4>@Model.titlu</h4>
    <hr />
    <dl class="dl-horizontal">
        <dt>@Html.DisplayNameFor(model => model.titlu)</dt>
        <dd>@Html.DisplayFor(model => model.titlu)</dd>

        <dt>@Html.DisplayNameFor(model => model.nume_autor)</dt>
        <dd>@Html.DisplayFor(model => model.nume_autor)</dd>

        @if (!string.IsNullOrEmpty(Model.nume_serie))
        {
            <dt>Serie</dt>
            <dd>@Model.nume_serie@(Model.nr_volum.HasValue ? " - Volumul " + Model.nr_volum.ToString() : "")</dd>
        }

        @if (!string.IsNullOrEmpty(Model.nume_categorie))
        {
            <dt>@Html.DisplayNameFor(model => model.nume_categorie)</dt>
            <dd>@Model.nume_categorie</dd>
        }

        <dt>@Html.DisplayNameFor(model => model.descriere)</dt>
        <dd>@Html.DisplayFor(model => model.descriere)</dd>
    </dl>
</div>

<div class="btn-group" role="group">
    @using (Html.BeginForm("CitesteCarte", "Utilizator", new { id = Model.id_carte }, FormMethod.Post))
    {
        @Html.AntiForgeryToken()
        <button type="submit" class="btn btn-primary">Citeste</button>
    }

    @if (ViewBag.CanDownload == true)
    {
        using (Html.BeginForm("DownloadCarte", "Utilizator", new { id = Model.id_carte }, FormMethod.Post))
        {
            @Html.AntiForgeryToken()
            <button type="submit" class="btn btn-success">Descarca (VIP)</button>
        }
    }
    else if (ViewBag.CurrentUser != null)
    {
        @Html.ActionLink("Upgrade la VIP pentru Download", "Profil", "Utilizator", null, new { @class = "btn btn-warning" })
    }
</div>

<p style="margin-top: 20px;">
    @Html.ActionLink("Inapoi la Carti", "Carti", "Utilizator", null, new { @class = "btn btn-default" })
    @Html.ActionLink("Planuri", "Index", "Utilizator", null, new { @class = "btn btn-info" })
</p>
